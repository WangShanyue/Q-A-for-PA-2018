# 授课内容 PA3.1
作者：南京航空航天大学 计算机科学与技术学院 金航
未经作者允许，禁止转载

## 操作系统：更方便的运行环境

回想我们之前的运行环境由谁来提供？AM，但是AM并不是操作系统，其没有中断和文件的概念。

OS：提供文件管理服务，我们的程序都是在OS下运行的。现在我们要实现一个简单的操作系统支持`dummy`的运行。

## 什么是NANOS-LITE？
可以认为是我们运行在NEMU/AM之上的一个OS

## 现在的NANOS-LITE有什么功能？
1. 输出两条log
2. 初始化`ramdisk`：即内存模拟磁盘
3. 初始化设备：调用AM的初始化函数
4. 加载用户程序：通过`loader`讲用户程序加载到指定位置（第一个任务）
5. 跳转到用户程序入口点：即调用`entry`函数

## NANOS-LITE运行用户程序的机理
1. 先将待运行的用户程序放于`ramdisk`的映像中（编译阶段完成）
2. 开始运行项目，首先加载`ramdisk`
2. 从`ramdisk`中将程序读到指定内存处（运行NANOS-LITE后由`loder`完成）
3. 调用放置好的程序

## 编译用户程序
1. 按讲义要求编译出`dummy-x86`
2. 执行`make update`更新`ramdisk`

这样以后，可执行文件就进入了`ramdisk.img`这个映像文件中。

## 任务：实现loader
1. 目前，我们只需要直接将程序读到`0x40000000`这个位置就可以了。使用`ramdisk.c`中提供的函数。
2. 程序在哪里？`ramdisk`偏移为`0`的地方。
3. 在哪里实现？理所当然：`loader.c`。
4. 很简单，10行代码以内就能实现。







